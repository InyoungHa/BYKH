<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragment/admin_layout}">

<!-- 연결해야할 외부 css 파일 -->
<th:block layout:fragment="content_css">
   	<!-- <link rel="stylesheet" href="/"> -->
</th:block>

<th:block layout:fragment="content">
   <div class="row">
		<div class="col">
			<h2>결재현황</h2>
			<div class="row mt-3 mb-3">
				<div class="col-10">
					진행중인 결재건
				</div>
				<div class="col-2 d-grid">
					<input type="button" value="+ 새 결제" class="btn btn-primary" th:onclick="|location.href='@{/sign/signWriteForm}'|">
				</div>
			</div>
			<div class="row mb-3">
				<div class="col-12">
					<table class="table table-bordered text-center">
						<colgroup>
							<col width="5%">
							<col width="*">
							<col width="20%">
							<col width="15%">
							<col width="15%">
						</colgroup>
						<thead class="table-head">
							<tr>
								<td>번호</td>
								<td>제목</td>
								<td>작성일</td>
								<td>작성자</td>
								<td>상태</td>
							</tr>
						</thead>
						<tbody>
								<th:block th:if="${#lists.size(inProgressSignDocList) != 0}">
									<th:block th:each="signDoc, status : ${inProgressSignDocList}">
										<tr>
											<td>[[${status.size - status.index}]]</td>
											<td  style="cursor: pointer;" th:onclick="showSignDocModal(this);" 
											th:data-doc-no="${signDoc.docNo}" th:data-doc-type=${signDoc.docType}>
												<span>
													[[${signDoc.docTitle}]]
												</span>
											</td>
											<td>[[${signDoc.insertDate}]]</td>
											<td>[[${signDoc.empVO.ename}]]</td>
											<td>[[${signDoc.sgnStatusStr}]]</td>
										</tr>
									</th:block>
								</th:block>
								<th:block th:if="${#lists.size(inProgressSignDocList) == 0}">
									<tr><td colspan="5">진행 중인 기안이 없습니다.</td></tr>
								</th:block>
						</tbody>
					</table>
				</div>
			</div>
			<div class="row mt-3 mb-3">
				<div class="col-10">
					완료된 결재건
				</div>
			</div>
			<div class="row mb-3">
				<div class="col">
					<table class="table table-bordered text-center">
						<colgroup>
							<col width="5%">
							<col width="*">
							<col width="20%">
							<col width="15%">
							<col width="15%">
						</colgroup>
						<thead class="table-head">
							<tr>
								<td>번호</td>
								<td>제목</td>
								<td>작성일</td>
								<td>작성자</td>
								<td>상태</td>
							</tr>
						</thead>
						<tbody>
								<th:block th:if="${#lists.size(endSignDocList) != 0}">
									<th:block th:each="signDoc, status : ${endSignDocList}">
										<tr>
											<td>[[${status.size - status.index}]]</td>
											<td>
												<span>
													[[${signDoc.docTitle}]]
												</span>											
											</td>
											<td>[[${signDoc.insertDate}]]</td>
											<td>[[${signDoc.empVO.ename}]]</td>
											<td>[[${signDoc.sgnStatusStr}]]</td>
										</tr>
									</th:block>
								</th:block>
								<th:block th:if="${#lists.size(endSignDocList) == 0}">
									<tr><td colspan="5">완료된 기안이 없습니다.</td></tr>
								</th:block>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	
	<!-- 기안 조회 모달 -->
	<!-- 임시저장일 경우 모달 띄우고 아닐 경우 작성 페이지로 이동 -->
	<div class="modal fade" id="showSignDoc" data-bs-backdrop="static"
		data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="staticBackdropLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="staticBackdropLabel">Modal title</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					
				</div>
				<!-- 결재자만 조회되도록 수정 -->
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-bs-dismiss="modal">반려</button>
					<button type="button" class="btn btn-primary">결재</button>
				</div>
			</div>
		</div>
	</div>


</th:block>

<!-- 연결해야할 외부 js 파일 -->
<th:block layout:fragment="content_js">
	<script type="text/javascript" src="/js/content/sign/sign_main.js"></script>
</th:block>

</html>