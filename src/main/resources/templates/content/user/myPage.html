<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
   layout:decorate="~{fragment/admin_layout}">

<th:block layout:fragment="content_css">
	<!--연결해야하는 외부 css  -->
	<link rel="stylesheet" href="/css/myPage.css">
</th:block>

<th:block layout:fragment="content">
	<div class="row">
		<div class="col">
			<label class="page_title">마이 페이지</label>
			<form class="row g-3" id="regSelfEmpDetailFrom">
			<div class="col-6">
				<div class="row">
					<div class="col card text-center" style="max-width: 40rem;">
						<img th:src="${empDetail.eImgVO.attachedFileName != null ? '/upload/empImg/' + empDetail.eImgVO.attachedFileName : '/upload/empImg/test.jpg'}" 
							style="width: 18rem; display: block;  margin: 0 auto;" id="empImgPreview" class="card-img-top">
		 			<input type="file" class="form-control" id="empImgInput">
					<div class="card-body">
						<h4 class="card-title">[[${empDetail.ename}]]</h4>
						<p class="card-text">[[${empDetail.deptVO.dename +'(' +empDetail.deptVO.loc+')'}]]</p>
					</div>
					<div class="col-4 offset-4 text-center mb-3">
						<button class="btn" type="button" onclick="location.href='/user/checkEPwPage'">
							<div>비밀번호 변경</div>
						</button>
					</div>
					</div>
				</div>
			</div>
			<div class="col-6">
				<div class="row">
					<div class="col card mb-3" style="max-width: 40rem;">
						<ul class="list-group list-group-flush">
						<li class="list-group-item">기본 정보</li>		
						<table style="margin-bottom:1rem;">
							<tr>
								<td>이름</td>
								<td>
									<input type="text" th:value="${empDetail.ename}" oninput="reg_empDetail_validate();" id="ename" name="ename" class="form-control">
								</td>
							</tr>
							<tr>
								<td>사번</td>
								<td>
									<div id="empno">[[${empDetail.empno}]]</div>
									</td>
							</tr>
							<tr>
								<td>아이디</td>
								<td>[[${empDetail.empno}]]</td>
							</tr>						
						</table>
					</ul>
					</div>
				</div>
				<div class="row">
					<div class="col card mb-3" style="max-width: 40rem;">
					<ul class="list-group list-group-flush">
					<li class="list-group-item">인사 정보</li>	
					<table style="margin-bottom:1rem;">
						<tr>
							<td>부서</td>
							<td>[[${empDetail.deptVO.dename +'(' +empDetail.deptVO.loc+')'}]]</td>
	 					</tr>
	 					<tr>
	 						<td>직급</td>
	 						<td>[[${empDetail.eJob}]]</td>
						</tr>
						<tr>
							<td>입사일</td>
							<td>[[${empDetail.joinDate}]]</td>
						</tr>
					</table>
					</ul>
					</div>			
				</div>
				<div class="row">
					<div class="col card mb-3" style="max-width: 40rem;">
					<ul class="list-group list-group-flush">
					<li class="list-group-item">연락처 정보</li>
						<table style="margin-bottom:1rem;">
							<tr>
								<td>이메일</td>
								<td id="eEmail">[[${empDetail.empno}]]@bykh.com</td>
							</tr>
							<tr>
								<td>내선번호</td>
								<td>
									<div class="row">
										<div class="col-3">
											<select id="officeTel" class="form-select form-control-sm">											
												<option value="02" th:selected="${firstOffice == '02'}">02(서울)</option>
												<option value="032" th:selected="${firstOffice == '032'}">032(인천)</option>
												<option value="051" th:selected="${firstOffice == '051'}">051(부산)</option>
												<option value="061" th:selected="${firstOffice == '061'}">061(여수)</option>
											</select>
										</div>
										<div class="col-auto">
											<input type="number" id="officeTelInput" oninput="reg_empDetail_validate();" th:value="${numberOffice}" min="0" class="form-control form-control-sm">
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>휴대전화</td>
								<td>
									<div class="row">
										<div class="col-3">
											<select id="phoneTel" class="form-select form-control-sm">
												<option value="010" th:selected="${numberPhone == '010'}">010</option>
												<option value="011" th:selected="${numberPhone == '011'}">011</option>
												<option value="012" th:selected="${numberPhone == '012'}">012</option>
											</select>
										</div>
										<div class="col-auto">
											<input type="number" id="phoneTelInput" oninput="reg_empDetail_validate();" th:value="${numberPhone}" min="0" class="form-control form-control-sm">
										</div>
									</div>
								</td>
							</tr>
						</table>
							<span style="color: black; font-size: 0.8rem; text-align:center;">전화번호는 숫자만 입력해주세요(-없이)</span>
					</ul>
					</div>
				</div>
					<div class="row mb-4">
<!-- 						<div class="col d-grid gap-2 d-md-flex text-right justify-content-md-end"> -->
						<div class="col-3 offset-9">
							<input type="button" value="저장" onclick="regSelfEmpDetail()" class="btn">
							<input type="button" value="취소" onclick="revokeMyPage()" class="btn">
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>


</th:block>

<th:block layout:fragment="content_js">
	<!--연결해야하는 외부 js  -->
	<script type="text/javascript" src="/js/content/myPage.js"></script>
</th:block>

</html>
