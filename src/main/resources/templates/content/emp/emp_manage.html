<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
   layout:decorate="~{fragment/admin_layout}">

<th:block layout:fragment="content_css">

	<!--연결해야하는 외부 css  -->
<link rel="stylesheet" href="/css/emp/emp_manage.css">
</th:block>


<th:block layout:fragment="content">
	<div class="row">
		<div class="col">
			<div class="row">
				<div class="col">
					<label class="page_title">사용자 조회 | 수정</label>
				</div>
			</div>
			<div class="row g-3" style="margin-bottom: 1rem;">
				<div class="col-auto">
					<select class="form-select form-select-sm">
						<option>10명</option>
						<option>10명</option>
						<option>10명</option>
						<option>10명</option>
					</select>
				</div>
				<div class="col-auto ms-auto">
					<div class="d-flex align-items-center">
						<select class="form-select ">
							<option>사번</option>
							<option>부서</option>
							<option>재직상태</option>
							<option>이름</option>
						</select> <input type="text" class="form-control ms-2">
					</div>
				</div>
			</div>
			<div class="row mb-3">
				<div class="col">
					<form id="regEmpForm">	
					<table class="table align-middle text-center" style="margin-bottom: 0; padding-bottom: 0;">
						<colgroup>
							<col width="5%">
							<col width="10%">
							<col width="10%">
							<col width="10%">
							<col width="10%">
							<col width="8%">
							<col width="8%">
							<col width="8%">
							<col width="8%">
							<col width="8%">
							<col width="8%">
						</colgroup>
						<thead>
							<tr>
								<th>No.</th>
								<th>사번</th>
								<th>이름</th>
								<th>아이디</th>
								<th>비밀번호</th>
								<th>입사일</th>
								<th>부서</th>
								<th>직급</th>
								<th>재직상태</th>
								<th>계정상태</th>
								<th>계정관리</th>
							</tr>
						</thead>
						<tbody>													
							<tr>							
								<td colspan="2">									
									<button type="button" class="button">간편등록</button>
								</td>
								<td colspan="2">
									<input type="text" name="ename" id="ename" oninput="reg_emp_validate();" class="form-control">
							
								</td>								
								<td>
									<input type="password" name="epw" id="epw" oninput="reg_emp_validate();" class="form-control">
									
								</td>
								<td>
									<input type="date" name="joinDate"  class="form-control">
								</td>				
								<td >
									<select name="deptno" class="form-control">					
										<option th:each="dept:${deptList}" th:text="${dept.dename+'(' +dept.loc+')'}" th:value="${dept.deptno}"></option>										
									</select>
								</td>								
								<td>
									<select name="eJob" class="form-select">
										<option value="사장">사장</option>
										<option value="과장">과장</option>
										<option value="대리">대리</option>
										<option value="주임">주임</option>
										<option value="사원">사원</option>
									</select>
								</td>
								<td>
									<select name="eStatus" class="form-select">
										<option value="1">재직중</option>
										<option value="2">휴직</option>
										<option value="3">퇴사</option>
									</select>
								</td>
								<td colspan="2">									
									<button type="button" class="btn btn-primary" onclick="regEmp()">저장</button>
									<button type="button" class="btn btn-secondary" onclick="clearForm()">취소</button>
								</td>								
							</tr>
						</tbody>
					</table>					
				</form>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<table id="empListTable" class="table align-middle text-center">
						<colgroup>
								<col width="5%">
								<col width="10%">
								<col width="10%">
								<col width="10%">
								<col width="10%">
								<col width="11%">
								<col width="8%">
								<col width="8%">
								<col width="8%">
								<col width="8.7%">
								<col width="8%">
							</colgroup>
							<tbody>						
								<th:block th:if="${#lists.size(empList)==0}">
									<tr>
										<td colspan="11">등록된 사원이 없습니다.</td>
									</tr>
								</th:block>
								<th:block th:unless="${#lists.size(empList)==0}">						
									<tr th:each="emp,state:${empList}">
										<td>[[${state.count}]]</td>
										<td>[[${emp.empno}]]</td>
										<td>[[${emp.ename}]]</td>
										<td>[[${emp.empno}]]</td>
										<td>****</td>
										<td>[[${emp.joinDate}]]</td>
										<td>[[${emp.deptVO.dename}]]</td>
										<td>[[${emp.eJob}]]</td>
										<td>[[${emp.eStatusStr}]]</td>
										<td>[[${emp.eRole}]]</td>
										<td>
											<button th:onchange="changAccount([[${emp.empno}]]);" type="button" class="button">변경</button>
										</td>
									</tr>
								</th:block>
							</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>	
	
</th:block>

<th:block layout:fragment="content_js">
	<!--연결해야하는 외부 js  -->
<script type="text/javascript" src="/js/content/emp/emp_manage.js"></script>
</th:block>

</html>
